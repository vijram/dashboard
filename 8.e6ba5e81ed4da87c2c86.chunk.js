webpackJsonp([8],{"7cu0":function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,".actionMenuItem{font-size:13px}.inputLabel{color:#ff9700;display:block}.inputLabel,.inputLabelGrey{text-transform:uppercase;font-size:9px;font-weight:800}.inputLabelGrey{color:#666}",""]),t.exports=t.exports.toString()},"828T":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("/oeL"),o=n("qbdv"),i=n("bm2B"),a=n("CPp0"),l=n("BkNc"),r=n("FEt5"),d=n("68+G"),c=n("jQ5R"),u=n("+K4P"),p=(n("5v8a"),n("ww/K")),m=n("ue/A"),b=n("bXVx"),h=n("FMac"),f=this&&this.__decorate||function(t,e,n,s){var o,i=arguments.length,a=i<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,s);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},v=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},g=this&&this.__param||function(t,e){return function(n,s){e(n,s,t)}},y=function(){function t(t,e,n){this.http=t,this.basePath=b.a.basePath,this.defaultHeaders=new a.a,this.configuration=new m.a,e&&(this.basePath=e),n&&(this.configuration=n)}return t.prototype.deleteUser=function(t,e,n){return this.deleteUserWithHttpInfo(t,e,n).map(function(t){return 204===t.status?void 0:t.json()})},t.prototype.deleteUserWithHttpInfo=function(t,e,n){var s=this.basePath+"/user/delete/"+t+"/"+e,o=new a.f,i=new a.a(this.defaultHeaders.toJSON());if(null===t||void 0===t)throw new Error("Required parameter atoken was null or undefined when calling deleteUser.");if(null===e||void 0===e)throw new Error("Required parameter email was null or undefined when calling deleteUser.");var l=new a.e({method:a.d.Delete,headers:i,search:o});return n&&(l=Object.assign(l,n)),this.http.request(s,l)},t}();y=f([Object(s.Injectable)(),g(1,Object(s.Optional)()),g(1,Object(s.Inject)(p.a)),g(2,Object(s.Optional)()),v("design:paramtypes",["function"==typeof(w=void 0!==h.a&&h.a)&&w||Object,String,"function"==typeof(j=void 0!==m.a&&m.a)&&j||Object])],y);var w,j,O=n("hZvQ"),U=n("dXww"),M=this&&this.__decorate||function(t,e,n,s){var o,i=arguments.length,a=i<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,s);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},P=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},L=function(){function t(t,e,n,s,o,i,a,l){var r=this;this.router=t,this._cookieService=e,this._listUsersApi=n,this._countAllUsersApi=s,this._createUpdateUserApi=o,this._deleteUserApi=i,this._changeUserPasswordApi=a,this.http=l,this.notification=new U.a,this.userObj={},this.listObj={},this.modal={},this.usersList=[],this.countryList=[],this.stateList=[],this.timezoneList=[],this.userCount=[],this.msgPagination=!1,this.msgPageSize=10,this.msgPageNo=1,this.http.get("/assets/data/countries.json").subscribe(function(t){return r.countryList=t.json()}),this.loadTimezone()}return t.prototype.ngOnDestroy=function(){},t.prototype.ngOnInit=function(){this.userObj&&(this.userObj=JSON.parse(this._cookieService.get("user_details"))),$("input").not("[type=submit]").jqBootstrapValidation(),$("select").not("[type=submit]").jqBootstrapValidation(),this.loadUserList(null,null)},t.prototype.loadState=function(t){for(var e=this,n=this,s=0;s<this.countryList.length;s++)n.countryList[s].name===t&&this.http.get("/assets/data/countries/"+n.countryList[s].filename+".json").subscribe(function(t){return e.stateList=t.json()});this.stateList.sort()},t.prototype.loadTimezone=function(){var t=this;this.http.get("/assets/data/timezones.json").subscribe(function(e){for(var n=JSON.parse(e._body),s=0;s<n.length;s++)if(n[s].utc)for(var o=0;o<n[s].utc.length;o++)t.timezoneList.push(n[s].utc[o]);t.timezoneList.sort()})},t.prototype.loadUserList=function(t,e){var n=this;this._countAllUsersApi.countAllUsers(this.userObj.token).subscribe(function(s){n.userCount=s.total,n.userCount>n.msgPageSize?n.msgPagination=!0:n.msgPagination=!1,n._listUsersApi.listUsers(n.userObj.token,n.msgPageSize,t,e).subscribe(function(t){n.usersList=t},function(t){t&&417===t.status&&(console.log("Error :",t),console.log("Error in getting users list"))})},function(t){t&&417===t.status&&(console.log("Error :",t),console.log("Error in getting users count"))})},t.prototype.loadPrevMsg=function(){this.msgPageNo>1&&(this.msgPageNo--,this.loadUserList("PREV",this.usersList[0].id))},t.prototype.loadNxtMsg=function(){var t=Math.ceil(this.userCount/this.msgPageSize);this.msgPageNo<t&&(this.msgPageNo++,this.loadUserList("NEXT",this.usersList[this.usersList.length-1].id))},t.prototype.upsertUser=function(){var t=this;this._createUpdateUserApi.upsertUser(this.userObj.token,this.listObj).subscribe(function(e){$("#widgetModal_user").modal("hide"),t.loadUserList(null,null),t.notification.send("top","success","User create/update successfully!")},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in creating user"),t.notification.send("top","error","Error in user create/update!"))})},t.prototype.updatePassword=function(){var t=this;if(""===this.listObj.password)return!1;this._changeUserPasswordApi.changeUserPassword(this.userObj.token,this.listObj.email,this.listObj.password).subscribe(function(e){$("#widgetModal_password").modal("hide"),t.loadUserList(null,null),t.notification.send("top","success","User password updated successfully!")},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in updating user password"),t.notification.send("top","error","Error in updating user password!"))})},t.prototype.deleteUser=function(){var t=this;this._deleteUserApi.deleteUser(this.userObj.token,this.listObj.email).subscribe(function(e){$("#widgetModal_user_delete").modal("hide"),t.notification.send("top","success","User deleted successfully!"),t.loadUserList(null,null)},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in deleting user"),t.notification.send("top","error","Error in user delete!"))})},t.prototype.openAddUserModal=function(t){this.modal={title:"Add New User",button:"Create User",action:""},this.listObj={},$("#widgetModal_user").modal("show")},t.prototype.openEditUserModal=function(t){this.modal={title:"Edit User",button:"Update User",action:"readonly"},this.listObj=t,t.country&&this.loadState(t.country),$("#widgetModal_user").modal("show")},t.prototype.openPasswordModal=function(t){this.listObj=t,this.listObj.password="",$("#widgetModal_password").modal("show")},t.prototype.openDeleteUserModal=function(t){this.listObj=t,$("#widgetModal_user_delete").modal("show")},t}();L=M([Object(s.Component)({selector:"app-user",template:n("sFhb"),styles:[n("7cu0")]}),P("design:paramtypes",["function"==typeof(x=void 0!==l.c&&l.c)&&x||Object,"function"==typeof(_=void 0!==r.CookieService&&r.CookieService)&&_||Object,"function"==typeof(N=void 0!==d.a&&d.a)&&N||Object,"function"==typeof(C=void 0!==c.a&&c.a)&&C||Object,"function"==typeof(E=void 0!==u.a&&u.a)&&E||Object,"function"==typeof(k=void 0!==y&&y)&&k||Object,"function"==typeof(z=void 0!==O.a&&O.a)&&z||Object,"function"==typeof(A=void 0!==a.b&&a.b)&&A||Object])],L);var x,_,N,C,E,k,z,A,R=[{path:"users",component:L}],S=n("FyM1"),F=n("7qx0"),q=n("hccZ");n.d(e,"UserModule",function(){return D});var I=this&&this.__decorate||function(t,e,n,s){var o,i=arguments.length,a=i<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,s);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},D=function(){function t(){}return t}();D=I([Object(s.NgModule)({imports:[o.CommonModule,a.c,i.a,l.d.forChild(R)],declarations:[L],providers:[d.a,S.a,c.a,u.a,y,F.a,q.a,O.a]})],D)},sFhb:function(t,e){t.exports='<style>\n  .nav.nav-tabs.nav-top-border .nav-item a.nav-link.active {\n    border-top: 3px solid #FF9800;\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    color: #555;\n  }\n\n  .nav.nav-tabs.nav-top-border .nav-item a {\n    color: #9E9E9E;\n  }\n</style>\n<div class="app-content content container-fluid" style="">\n  <div class="content-wrapper">\n    <div class="content-header row">\n\n      <h3 class="content-header-title mb-0"><i class="icon-users3"></i> Manage Users\n\n        <a href="javascript:void(0)" class="btn btn-orange float-xs-right" style="color:#fff" (click)="openAddUserModal()">\n          <i class="icon-plus" style="color:#fff"></i> Add New User\n        </a>\n      </h3>\n\n      <hr>\n\n    </div>\n    <div class="content-body match-height" style="height:77vh">\n\n      <div class="card" style="">\n        <div class="card-header">\n          <h4 class="card-title">Total Users : {{userCount}}</h4>\n          <a class="heading-elements-toggle"><i class="icon-ellipsis font-medium-3"></i></a>\n          <div class="heading-elements">\n            <ul class="list-inline mb-0">\n              \x3c!--<li><a data-action="reload"><i class="icon-reload"></i></a></li>--\x3e\n              \x3c!--<li><a data-action="expand"><i class="icon-expand2"></i></a></li>--\x3e\n            </ul>\n          </div>\n        </div>\n        <div class="card-body collapse in">\n          <div class="card-block">\n            <div class="table-responsive"  style="min-height:400px">\n              <table class="table table-hover" style="width:100%">\n                <thead class="thead-inverse">\n                <tr>\n                  <th>Full Name </th>\n                  <th>Email <span style="font-size:12px;color:#666">(username)</span></th>\n                  <th>Timezone</th>\n                  <th>Country</th>\n                  <th style="text-align: center">Actions</th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr *ngFor="let user of usersList">\n                  <td><a style="font-weight: 600;color:#666" [routerLink]="[\'/b/profile\',user.email,false]">{{user.firstName}} {{user.lastName}}  <i class="icon-eye4"></i></a></td>\n                  <td>{{user.email}}</td>\n                  <td>{{user.timezone}}</td>\n                  <td>{{user.state}}<br>{{user.country}}</td>\n                  <td style="text-align: center">\n\n                    <div class="btn-group">\n\n                      <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Action</button>\n                      <div class="dropdown-menu" style="left:-131%">\n                        <a class="dropdown-item actionMenuItem" href="javascript:void(0)"  (click)="openEditUserModal(user)" ><i class="icon-edit"></i> Edit</a>\n                        <a class="dropdown-item actionMenuItem" href="javascript:void(0)"  (click)="openPasswordModal(user)" ><i class="icon-shield2"></i> Change Password</a>\n                        <a class="dropdown-item actionMenuItem" href="javascript:void(0)"  (click)="openDeleteUserModal(user)" ><i class="icon-trash2"></i> Delete</a>\n                      </div>\n                    </div>\n\n                  </td>\n                </tr>\n                </tbody>\n                <tfoot>\n                <tr>\n                  <td colspan="6">\n                    <nav aria-label="Page navigation" *ngIf="msgPagination">\n                      <ul class="pagination pull-right" style="width:100%">\n                        <li class="col-md-6">\n                          <a (click)="loadPrevMsg()" href="javascript:void(0)" class="brown"\n                             aria-label="Previous">\n                            <span aria-hidden="true">&laquo; Previous</span>\n                          </a>\n                        </li>\n                        <li class="col-md-6" style="text-align:right">\n                          <a (click)="loadNxtMsg()" href="javascript:void(0)" class="brown"\n                             aria-label="Next">\n                            <span aria-hidden="true">Next &raquo;</span>\n                          </a>\n                        </li>\n                      </ul>\n                    </nav>\n                  </td>\n                </tr>\n                </tfoot>\n              </table>\n            </div>\n\n\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n\n<div id="widgetModal_user" class="modal fade" tabindex="-1" role="dialog" style="">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\n          aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title"><i class="icon-user"></i> {{modal.title}}</h4>\n      </div>\n      <form name="userForm" (ngSubmit)="upsertUser(userForm)" #userForm="ngForm" novalidate autocomplete="off">\n        <div class="modal-body" style="padding-top:0px">\n\n          <div class="row" style="margin-top:10px;">\n            <div class="col-md-6">\n              <div class="form-group">\n                <label class="inputLabel">First Name</label>\n                <input type="text" class="form-control input-sm" placeholder="" [(ngModel)]="listObj.firstName" name="firstName" #firstName="ngModel" required>\n              </div>\n            </div>\n            <div class="col-md-6">\n              <div class="form-group">\n                <label class="inputLabel">Last Name</label>\n                <input type="text" class="form-control input-sm" placeholder="" [(ngModel)]="listObj.lastName" name="lastName" #lastName="ngModel" required>\n              </div>\n            </div>\n          </div>\n          <div class="row" style="margin-top:10px;">\n            <div class="col-md-6">\n              <div class="form-group">\n                <label class="inputLabel">Email Id</label>\n                <input type="email" class="form-control input-sm" [email]="true" placeholder="" readonly="{{modal.action}}" [(ngModel)]="listObj.email"  name="email" #email="ngModel"  required>\n              </div>\n            </div>\n            <div class="col-md-6" *ngIf="modal.action !== \'readonly\'">\n              <div class="form-group">\n                <label class="inputLabel">Passsword</label>\n                <input type="password" class="form-control input-sm" placeholder="" [(ngModel)]="listObj.password" name="password" #password="ngModel" required>\n              </div>\n            </div>\n          </div>\n          <div class="row" style="margin-top:10px;">\n            <div class="col-md-6">\n              <div class="form-group">\n                <label class="inputLabel">Country</label>\n                <select class="form-control" (ngModelChange)="loadState($event)" name="country"  [(ngModel)]="listObj.country"  #country="ngModel" required>\n                  <option value="" selected>Choose Country</option>\n                  <option *ngFor="let country of countryList;" value="{{country.name}}">{{country.name}} ({{country.code}})</option>\n                </select>\n              </div>\n            </div>\n            <div class="col-md-6">\n              <div class="form-group">\n                <label class="inputLabel">State</label>\n                <select class="form-control" [(ngModel)]="listObj.state" name="state"   #state="ngModel" required>\n                  <option value="" selected>Choose State</option>\n                  <option *ngFor="let state of stateList;" value="{{state.name}}">{{state.name}} ({{state.code}})</option>\n                </select>\n              </div>\n            </div>\n          </div>\n          <div class="row" style="margin-top:10px;">\n            <div class="col-md-6">\n              <div class="form-group">\n                <label class="inputLabel">TimeZone</label>\n                <select class="form-control" [(ngModel)]="listObj.timezone" name="timezone"   #state="ngModel"  required>\n                  <option value="" selected>Choose Timezone</option>\n                  <option *ngFor="let timezone of timezoneList" value="{{timezone}}">{{timezone}}</option>\n                </select>\n              </div>\n            </div>\n            <div class="col-md-6">\n              <div class="form-group">\n              </div>\n            </div>\n          </div>\n\n        </div>\n        <div class="modal-footer">\n          <button type="button" class="btn btn-default btn-border" data-dismiss="modal">Close</button>\n          <button type="submit"  [disabled]="!userForm.valid" class="btn btn-primary btn-orange">{{modal.button}}\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n<div id="widgetModal_user_delete" class="modal fade" tabindex="-1" role="dialog" style="">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\n          aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title"><i class="icon-user"></i> Delete User</h4>\n      </div>\n      <div class="modal-body" style="padding-top:0px">\n\n        <div class="row" style="margin-top:10px;">\n          <div class="col-md-12">\n            <p class="font-medium-3 grey"> Are you sure want to delete the <b>{{listObj.id}}</b> user?</p>\n          </div>\n        </div>\n\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default btn-border" data-dismiss="modal">Close</button>\n        <button type="button" class="btn btn-primary btn-orange" (click)="deleteUser()">Proceed</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n<div id="widgetModal_password" class="modal fade" tabindex="-1" role="dialog" style="">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\n          aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title"><i class="icon-user"></i> Change User Password</h4>\n      </div>\n      <div class="modal-body" style="padding-top:0px">\n\n        <div class="row" style="margin-top:10px;">\n          <div class="col-md-6" >\n            <div class="form-group">\n              <label class="inputLabel">Passsword</label>\n              <input type="password" class="form-control input-sm" placeholder="" [(ngModel)]="listObj.password" name="password" />\n            </div>\n          </div>\n        </div>\n\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default btn-border" data-dismiss="modal">Close</button>\n        <button type="button" class="btn btn-primary btn-orange" (click)="updatePassword()">Update</button>\n      </div>\n    </div>\n  </div>\n</div>\n'}});