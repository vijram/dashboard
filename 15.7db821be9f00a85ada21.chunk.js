webpackJsonp([15],{"0KTc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("/oeL"),a=n("bm2B"),o=n("CPp0"),s=n("qbdv"),r=n("BkNc"),l=n("FEt5"),c=(n("5v8a"),n("ww/K")),d=n("ue/A"),u=n("bXVx"),p=n("FMac"),h=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},v=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},g=function(){function e(e,t,n){this.http=e,this.basePath=u.a.basePath,this.defaultHeaders=new o.a,this.configuration=new d.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.countAllEvents=function(e,t){return this.countAllEventsWithHttpInfo(e,t).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.countAllEventsWithHttpInfo=function(e,t){var n=this.basePath+"/event/count/${atoken}".replace("${atoken}",String(e)),i=new o.f,a=new o.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling countAllEvents.");var s=new o.e({method:o.d.Post,headers:a,search:i});return t&&(s=Object.assign(s,t)),this.http.request(n,s)},e}();g=h([Object(i.Injectable)(),f(1,Object(i.Optional)()),f(1,Object(i.Inject)(c.a)),f(2,Object(i.Optional)()),v("design:paramtypes",["function"==typeof(b=void 0!==p.a&&p.a)&&b||Object,String,"function"==typeof(m=void 0!==d.a&&d.a)&&m||Object])],g);var b,m,y=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},w=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},O=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},E=function(){function e(e,t,n){this.http=e,this.basePath=u.a.basePath,this.defaultHeaders=new o.a,this.configuration=new d.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.listEvents=function(e,t,n,i,a){return this.listEventsWithHttpInfo(e,t,n,i,a).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.listEventsWithHttpInfo=function(e,t,n,i,a){var s=this.basePath+"/event/list/${atoken}/${pageSize}".replace("${atoken}",String(e)).replace("${pageSize}",String(t)),r=new o.f,l=new o.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling listEvents.");if(null===t||void 0===t)throw new Error("Required parameter pageSize was null or undefined when calling listEvents.");void 0!==n&&r.set("direction",n),void 0!==i&&r.set("eid",i);var c=new o.e({method:o.d.Get,headers:l,search:r});return a&&(c=Object.assign(c,a)),this.http.request(s,c)},e}();E=y([Object(i.Injectable)(),O(1,Object(i.Optional)()),O(1,Object(i.Inject)(c.a)),O(2,Object(i.Optional)()),w("design:paramtypes",["function"==typeof(j=void 0!==p.a&&p.a)&&j||Object,String,"function"==typeof(R=void 0!==d.a&&d.a)&&R||Object])],E);var j,R,_=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},C=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},x=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},P=function(){function e(e,t,n){this.http=e,this.basePath=u.a.basePath,this.defaultHeaders=new o.a,this.configuration=new d.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.deleteEvent=function(e,t,n){return this.deleteEventWithHttpInfo(e,t,n).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.deleteEventWithHttpInfo=function(e,t,n){var i=this.basePath+"/event/delete/${atoken}/${eid}".replace("${atoken}",String(e)).replace("${eid}",String(t)),a=new o.f,s=new o.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling deleteEvent.");if(null===t||void 0===t)throw new Error("Required parameter eid was null or undefined when calling deleteEvent.");var r=new o.e({method:o.d.Delete,headers:s,search:a});return n&&(r=Object.assign(r,n)),this.http.request(i,r)},e}();P=_([Object(i.Injectable)(),x(1,Object(i.Optional)()),x(1,Object(i.Inject)(c.a)),x(2,Object(i.Optional)()),C("design:paramtypes",["function"==typeof(I=void 0!==p.a&&p.a)&&I||Object,String,"function"==typeof(S=void 0!==d.a&&d.a)&&S||Object])],P);var I,S,M=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},k=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},A=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},L=function(){function e(e,t,n){this.http=e,this.basePath=u.a.basePath,this.defaultHeaders=new o.a,this.configuration=new d.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.upsertEvent=function(e,t,n){return this.upsertEventWithHttpInfo(e,t,n).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.upsertEventWithHttpInfo=function(e,t,n){var i=this.basePath+"/event/upsert/${atoken}".replace("${atoken}",String(e)),a=new o.f,s=new o.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling upsertEvent.");if(null===t||void 0===t)throw new Error("Required parameter entity was null or undefined when calling upsertEvent.");s.set("Content-Type","application/json");var r=new o.e({method:o.d.Post,headers:s,body:null==t?"":JSON.stringify(t),search:a});return n&&(r=Object.assign(r,n)),this.http.request(i,r)},e}();L=M([Object(i.Injectable)(),A(1,Object(i.Optional)()),A(1,Object(i.Inject)(c.a)),A(2,Object(i.Optional)()),k("design:paramtypes",["function"==typeof(F=void 0!==p.a&&p.a)&&F||Object,String,"function"==typeof(N=void 0!==d.a&&d.a)&&N||Object])],L);var F,N,D=n("dXww"),q=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},H=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},W=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},z=function(){function e(e,t,n){this.http=e,this.basePath=u.a.basePath,this.defaultHeaders=new o.a,this.configuration=new d.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.countAllEventRegistrationsForChannel=function(e,t,n,i){return this.countAllEventRegistrationsForChannelWithHttpInfo(e,t,n,i).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.countAllEventRegistrationsForChannelWithHttpInfo=function(e,t,n,i){var a=this.basePath+"/eventreg/channel/count/${atoken}/${eid}/${channel}".replace("${atoken}",String(e)).replace("${eid}",String(t)).replace("${channel}",String(n)),s=new o.f,r=new o.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling countAllEventRegistrationsForChannel.");if(null===t||void 0===t)throw new Error("Required parameter eid was null or undefined when calling countAllEventRegistrationsForChannel.");if(null===n||void 0===n)throw new Error("Required parameter channel was null or undefined when calling countAllEventRegistrationsForChannel.");var l=new o.e({method:o.d.Post,headers:r,search:s});return i&&(l=Object.assign(l,i)),this.http.request(a,l)},e}();z=q([Object(i.Injectable)(),W(1,Object(i.Optional)()),W(1,Object(i.Inject)(c.a)),W(2,Object(i.Optional)()),H("design:paramtypes",["function"==typeof(V=void 0!==p.a&&p.a)&&V||Object,String,"function"==typeof(J=void 0!==d.a&&d.a)&&J||Object])],z);var V,J,T=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},U=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},B=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},K=function(){function e(e,t,n){this.http=e,this.basePath=u.a.basePath,this.defaultHeaders=new o.a,this.configuration=new d.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.countAllEventRegistrationsForID=function(e,t,n){return this.countAllEventRegistrationsForIDWithHttpInfo(e,t,n).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.countAllEventRegistrationsForIDWithHttpInfo=function(e,t,n){var i=this.basePath+"/eventreg/id/count/${atoken}/${eid}".replace("${atoken}",String(e)).replace("${eid}",String(t)),a=new o.f,s=new o.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling countAllEventRegistrationsForID.");if(null===t||void 0===t)throw new Error("Required parameter eid was null or undefined when calling countAllEventRegistrationsForID.");var r=new o.e({method:o.d.Post,headers:s,search:a});return n&&(r=Object.assign(r,n)),this.http.request(i,r)},e}();K=T([Object(i.Injectable)(),B(1,Object(i.Optional)()),B(1,Object(i.Inject)(c.a)),B(2,Object(i.Optional)()),U("design:paramtypes",["function"==typeof(G=void 0!==p.a&&p.a)&&G||Object,String,"function"==typeof(X=void 0!==d.a&&d.a)&&X||Object])],K);var G,X,Y=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Q=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Z=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},ee=function(){function e(e,t,n){this.http=e,this.basePath=u.a.basePath,this.defaultHeaders=new o.a,this.configuration=new d.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.listEventRegistrations=function(e,t,n,i,a,o,s){return this.listEventRegistrationsWithHttpInfo(e,t,n,i,a,o,s).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.listEventRegistrationsWithHttpInfo=function(e,t,n,i,a,s,r){var l=this.basePath+"/eventreg/list/${atoken}/${eid}/${channel}/${pageSize}".replace("${atoken}",String(e)).replace("${eid}",String(t)).replace("${channel}",String(n)).replace("${pageSize}",String(i)),c=new o.f,d=new o.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling listEventRegistrations.");if(null===t||void 0===t)throw new Error("Required parameter eid was null or undefined when calling listEventRegistrations.");if(null===n||void 0===n)throw new Error("Required parameter channel was null or undefined when calling listEventRegistrations.");if(null===i||void 0===i)throw new Error("Required parameter pageSize was null or undefined when calling listEventRegistrations.");void 0!==a&&c.set("direction",a),void 0!==s&&c.set("address",s);var u=new o.e({method:o.d.Get,headers:d,search:c});return r&&(u=Object.assign(u,r)),this.http.request(l,u)},e}();ee=Y([Object(i.Injectable)(),Z(1,Object(i.Optional)()),Z(1,Object(i.Inject)(c.a)),Z(2,Object(i.Optional)()),Q("design:paramtypes",["function"==typeof(te=void 0!==p.a&&p.a)&&te||Object,String,"function"==typeof(ne=void 0!==d.a&&d.a)&&ne||Object])],ee);var te,ne,ie=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},ae=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},oe=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},se=function(){function e(e,t,n){this.http=e,this.basePath=u.a.basePath,this.defaultHeaders=new o.a,this.configuration=new d.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.registerEvent=function(e,t,n,i,a){return this.registerEventWithHttpInfo(e,t,n,i,a).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.registerEventWithHttpInfo=function(e,t,n,i,a){var s=this.basePath+"/eventreg/register/${atoken}/${eid}/${channel}/${address}".replace("${atoken}",String(e)).replace("${eid}",String(t)).replace("${channel}",String(n)).replace("${address}",String(i)),r=new o.f,l=new o.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling registerEvent.");if(null===t||void 0===t)throw new Error("Required parameter eid was null or undefined when calling registerEvent.");if(null===n||void 0===n)throw new Error("Required parameter channel was null or undefined when calling registerEvent.");if(null===i||void 0===i)throw new Error("Required parameter address was null or undefined when calling registerEvent.");var c=new o.e({method:o.d.Post,headers:l,search:r});return a&&(c=Object.assign(c,a)),this.http.request(s,c)},e}();se=ie([Object(i.Injectable)(),oe(1,Object(i.Optional)()),oe(1,Object(i.Inject)(c.a)),oe(2,Object(i.Optional)()),ae("design:paramtypes",["function"==typeof(re=void 0!==p.a&&p.a)&&re||Object,String,"function"==typeof(le=void 0!==d.a&&d.a)&&le||Object])],se);var re,le,ce=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},de=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ue=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},pe=function(){function e(e,t,n){this.http=e,this.basePath=u.a.basePath,this.defaultHeaders=new o.a,this.configuration=new d.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.unregisterEvent=function(e,t,n,i,a){return this.unregisterEventWithHttpInfo(e,t,n,i,a).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.unregisterEventWithHttpInfo=function(e,t,n,i,a){var s=this.basePath+"/eventreg/unregister/${atoken}/${eid}/${channel}/${address}".replace("${atoken}",String(e)).replace("${eid}",String(t)).replace("${channel}",String(n)).replace("${address}",String(i)),r=new o.f,l=new o.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling unregisterEvent.");if(null===t||void 0===t)throw new Error("Required parameter eid was null or undefined when calling unregisterEvent.");if(null===n||void 0===n)throw new Error("Required parameter channel was null or undefined when calling unregisterEvent.");if(null===i||void 0===i)throw new Error("Required parameter address was null or undefined when calling unregisterEvent.");var c=new o.e({method:o.d.Delete,headers:l,search:r});return a&&(c=Object.assign(c,a)),this.http.request(s,c)},e}();pe=ce([Object(i.Injectable)(),ue(1,Object(i.Optional)()),ue(1,Object(i.Inject)(c.a)),ue(2,Object(i.Optional)()),de("design:paramtypes",["function"==typeof(he=void 0!==p.a&&p.a)&&he||Object,String,"function"==typeof(ve=void 0!==d.a&&d.a)&&ve||Object])],pe);var he,ve,fe,ge=n("URx+"),be=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},me=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};!function(e){e[e.EMAIL="EMAIL"]="EMAIL",e[e.SMS="SMS"]="SMS",e[e.VOICE="VOICE"]="VOICE",e[e.FCM="FCM"]="FCM",e[e.ANDROID="ANDROID"]="ANDROID",e[e.IOS="IOS"]="IOS",e[e.WINDOWS="WINDOWS"]="WINDOWS"}(fe||(fe={}));var ye=function(){function e(e,t,n,i,a,o,s,r,l,c,d,u){this.router=e,this._cookieService=t,this._countAllEventsApi=n,this._listEventsApi=i,this._createUpdateEventApi=a,this._deleteEventApi=o,this._countAllEventRegistrationsForChannelApi=s,this._countAllEventRegistrationsForIDApi=r,this._listEventRegistrationsApi=l,this._unregisterEventApi=c,this._registerEventApi=d,this._listFCMDevicesApi=u,this.notification=new D.a,this.channels={EMAIL:fe.EMAIL,SMS:fe.SMS,VOICE:fe.VOICE,FCM:fe.FCM,ANDROID:fe.ANDROID,IOS:fe.IOS,WINDOWS:fe.WINDOWS},this.channelsList=["EMAIL","SMS","VOICE","FCM"],this.userObj={},this.eventRegObj={},this.eventObj={id:""},this.modal={},this.eventsList=[],this.deviceFCMList=[],this.regEventsList=[],this.regEventsCount=0,this.resultList={EMAIL:[],SMS:[],VOICE:[],FCM:[]},this.resultPaginatin={EMAIL:1,SMS:1,VOICE:1,FCM:1},this.resultCount={EMAIL:0,SMS:0,VOICE:0,FCM:0},this.eventsCount=0,this.msgPagination=!1,this.msgPageSize=5,this.msgPageNo=1,this.widgetAccess=!1}return e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){this.userObj&&(this.userObj=JSON.parse(this._cookieService.get("user_details")));for(var e=this.userObj.user.roles,t=0;t<e.length;t++)"admin"!==e[t]&&"domainadmin"!==e[t]||(this.widgetAccess=!0);this.loadEventList(null,null)},e.prototype.loadEventList=function(e,t){var n=this,i=this;this._countAllEventsApi.countAllEvents(this.userObj.token).subscribe(function(a){n.eventsCount=a.total,n.eventsCount>n.msgPageSize?n.msgPagination=!0:n.msgPagination=!1,n._listEventsApi.listEvents(n.userObj.token,n.msgPageSize,e,t).subscribe(function(e){i.eventsList=e,e.length>0&&setTimeout(function(){i.viewContent(e[0])},500)},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in getting events list"))})},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in getting events count"))})},e.prototype.loadPrevMsg=function(){this.msgPageNo>1&&(this.msgPageNo--,this.loadEventList("PREV",this.eventsList[0].id))},e.prototype.loadNxtMsg=function(){var e=Math.ceil(this.eventsCount/this.msgPageSize);this.msgPageNo<e&&(this.msgPageNo++,this.loadEventList("NEXT",this.eventsList[this.eventsList.length-1].id))},e.prototype.deleteEvent=function(){var e=this;this._deleteEventApi.deleteEvent(this.userObj.token,this.eventObj.id).subscribe(function(t){$("#widgetModal_event_delete").modal("hide"),e.notification.send("top","success","Event deleted successfully!"),e.loadEventList(null,null)},function(t){t&&417===t.status&&(console.log("Error :",t),console.log("Error in deleting event"),e.notification.send("top","error","Error in event delete!"))})},e.prototype.upsertEvent=function(){var e=this;this._createUpdateEventApi.upsertEvent(this.userObj.token,this.eventObj).subscribe(function(t){$("#widgetModal_event").modal("hide"),e.loadEventList(null,null),e.notification.send("top","success","Event create/update successfully!")},function(t){t&&417===t.status&&(console.log("Error :",t),console.log("Error in getting event create/update"),e.notification.send("top","error","Error in event create/update!"))})},e.prototype.openAddEventModal=function(){this.modal={title:"Add New Event",button:"Create Event",action:"",disabled:!0},this.eventObj={id:""},$("#widgetModal_event").modal("show")},e.prototype.openEditEventModal=function(e){this.modal={title:"Edit Event",button:"Update Event",action:"readonly",disabled:!1},this.eventObj=e,$("#widgetModal_event").modal("show")},e.prototype.openDeleteEventModal=function(e){this.eventObj=e,$("#widgetModal_event_delete").modal("show")},e.prototype.viewContent=function(e){this.eventObj=e,$(".events").removeClass("active"),$(".event_li_"+e.id).addClass("active"),$(".events .card-body").addClass("displayNone").removeClass("displayBlock"),$(".event_"+e.id).removeClass("displayNone").addClass("displayBlock"),this.resultPaginatin={EMAIL:1,SMS:1,VOICE:1,FCM:1},this.loadRegCount(e.id),this.loadRegChannels(e.id)},e.prototype.loadRegCount=function(e){var t=this;this._countAllEventRegistrationsForIDApi.countAllEventRegistrationsForID(this.userObj.token,e).subscribe(function(e){t.regEventsCount=e.total},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in getting events count")),t.regEventsCount=0})},e.prototype.loadRegChannels=function(e){var t=this;async.filter(this.channelsList,function(n,i){t.listRegEventByChannel(e,n,function(e,a){t.resultList[n]=e,t.resultCount[n]=a,i(null,null)})},function(e,t){})},e.prototype.listRegEventByChannel=function(e,t,n){var i=this,a=this;this._countAllEventRegistrationsForChannelApi.countAllEventRegistrationsForChannel(this.userObj.token,e,t).subscribe(function(o){a._listEventRegistrationsApi.listEventRegistrations(i.userObj.token,e,t,10,null,null).subscribe(function(e){n(e,o.total)},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in getting events reg list")),n([],o.total)})},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in getting events reg count")),n([],0)})},e.prototype.registerChannelEvent=function(e){this.eventRegObj={id:this.eventObj.id,channel:e,address:""},this.listFCMDevice(),$("#widgetModal_event_reg").modal("show")},e.prototype.unregisterChannelEvent=function(e){this.eventRegObj=e,$("#widgetModal_event_unreg").modal("show")},e.prototype.sendTestMessage=function(e){},e.prototype.registerEvent=function(){var e=this;this._registerEventApi.registerEvent(this.userObj.token,this.eventRegObj.id,this.eventRegObj.channel,this.eventRegObj.address).subscribe(function(t){$("#widgetModal_event_reg").modal("hide"),e.loadRegChannels(e.eventRegObj.id),e.loadRegCount(e.eventRegObj.id),e.notification.send("top","success","Event registered successfully!")},function(t){t&&417===t.status&&(console.log("Error :",t),console.log("Error in event registering"),e.notification.send("top","error","Error in event registering!"))})},e.prototype.unregisterEvent=function(){var e=this;this._unregisterEventApi.unregisterEvent(this.userObj.token,this.eventRegObj.id,this.eventRegObj.channel,this.eventRegObj.address).subscribe(function(t){$("#widgetModal_event_unreg").modal("hide"),e.loadRegChannels(e.eventRegObj.id),e.loadRegCount(e.eventRegObj.id),e.notification.send("top","success","Event un-registered successfully!")},function(t){t&&417===t.status&&(console.log("Error :",t),console.log("Error in event registering"),e.notification.send("top","error","Error in event un-registering!"))})},e.prototype.loadNxtChannel=function(e){var t=Math.ceil(this.resultCount[e]/10);this.resultPaginatin[e]<t&&(this.resultPaginatin[e]++,this.loadChannelsList(this.eventObj.id,e,"NEXT",this.resultList[e][this.resultList[e].length-1].address))},e.prototype.loadPrevChannnel=function(e){this.resultPaginatin[e]>1&&(this.resultPaginatin[e]--,this.loadChannelsList(this.eventObj.id,e,"PREV",this.resultList[e][0].address))},e.prototype.loadChannelsList=function(e,t,n,i){var a=this;a._listEventRegistrationsApi.listEventRegistrations(this.userObj.token,e,t,10,n,i).subscribe(function(e){a.resultList[t]=e},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in getting events reg list"))})},e.prototype.listFCMDevice=function(){var e=this;this._listFCMDevicesApi.listFCMDevices(this.userObj.token,100,null,null).subscribe(function(t){e.deviceFCMList=t},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in getting device fcm list"))})},e}();ye=be([Object(i.Component)({selector:"app-events",template:n("ztRa"),styles:[n("syYN")]}),me("design:paramtypes",["function"==typeof(we=void 0!==r.c&&r.c)&&we||Object,"function"==typeof(Oe=void 0!==l.CookieService&&l.CookieService)&&Oe||Object,"function"==typeof(Ee=void 0!==g&&g)&&Ee||Object,"function"==typeof(je=void 0!==E&&E)&&je||Object,"function"==typeof(Re=void 0!==L&&L)&&Re||Object,"function"==typeof(_e=void 0!==P&&P)&&_e||Object,"function"==typeof(Ce=void 0!==z&&z)&&Ce||Object,"function"==typeof(xe=void 0!==K&&K)&&xe||Object,"function"==typeof(Pe=void 0!==ee&&ee)&&Pe||Object,"function"==typeof(Ie=void 0!==pe&&pe)&&Ie||Object,"function"==typeof(Se=void 0!==se&&se)&&Se||Object,"function"==typeof(Me=void 0!==ge.a&&ge.a)&&Me||Object])],ye);var we,Oe,Ee,je,Re,_e,Ce,xe,Pe,Ie,Se,Me,ke=[{path:"events",component:ye}];n.d(t,"EventsModule",function(){return Le});var Ae=this&&this.__decorate||function(e,t,n,i){var a,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(a=e[r])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Le=function(){function e(){}return e}();Le=Ae([Object(i.NgModule)({imports:[s.CommonModule,o.c,a.a,r.d.forChild(ke)],declarations:[ye],providers:[g,L,P,E,pe,z,K,ee,se,ge.a]})],Le)},syYN:function(e,t,n){t=e.exports=n("rP7Y")(!1),t.push([e.i,".actionMenuItem{font-size:13px}.inputLabel{color:#ff9700;display:block}.inputLabel,.inputLabelGrey{text-transform:uppercase;font-size:9px;font-weight:800}.inputLabelGrey{color:#666}.firmwareList li .card-body:hover{background-color:hsla(0,0%,93%,.38)}.card .card-title{font-size:1rem}.inputKey{font-size:12px;color:#666}.inputValue{font-size:13px;font-weight:700}.card-block{padding:1rem}.card-header .heading-elements,.card-header .heading-elements-toggle{top:6px}.eventsList .active{background-color:hsla(0,0%,93%,.33);padding:10px}.displayNone{display:none!important}.displayBlock{display:block!important}.adddressList li{background-color:#fff;padding:5px;margin:0 5px 5px 0;border-bottom:1px solid #eee;font-size:.9rem}.adddressList li .addressSpan{width:85%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:block}.eventLink{position:absolute;right:0;top:0;background-color:rgba(0,0,0,.02);color:#ffe;padding:3px}",""]),e.exports=e.exports.toString()},ztRa:function(e,t){e.exports='<style>\n  .nav.nav-tabs.nav-top-border .nav-item a.nav-link.active {\n    border-top: 3px solid #FF9800;\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    color: #555;\n  }\n\n  .nav.nav-tabs.nav-top-border .nav-item a {\n    color: #9E9E9E;\n  }\n</style>\n<div class="app-content content container-fluid" style="">\n  <div class="content-wrapper">\n    <div class="content-header row">\n\n      <h3 class="content-header-title mb-0"><i class="icon-bell3"></i> Manage Events\n\n        <a href="javascript:void(0)" class="btn btn-orange float-xs-right" style="color:#fff"\n           (click)="openAddEventModal()" *ngIf="widgetAccess">\n          <i class="icon-plus" style="color:#fff"></i> Create Event\n        </a>\n      </h3>\n\n      <hr>\n\n    </div>\n    <div class="content-body match-height" style="height:77vh">\n\n      <div class="card" style="">\n        <div class="card-header" *ngIf="eventsList.length > 0">\n          <h4 class="card-title">Total Events : {{eventsCount}}</h4>\n          <a class="heading-elements-toggle"><i class="icon-ellipsis font-medium-3"></i></a>\n          <div class="heading-elements">\n            \x3c!--<ul class="list-inline mb-0">--\x3e\n            \x3c!--<li>--\x3e\n            \x3c!----\x3e\n            \x3c!--</li>--\x3e\n            \x3c!--<li><a data-action="reload"><i class="icon-reload"></i></a></li>--\x3e\n            \x3c!--<li><a data-action="expand"><i class="icon-expand2"></i></a></li>--\x3e\n            \x3c!--</ul>--\x3e\n          </div>\n        </div>\n        <div class="card-body collapse in">\n          <div class="card-block">\n\n            <div class="row" *ngIf="eventsList.length > 0">\n\n              <div class="col-md-3" style="padding:0px;margin:0px;">\n                <div class="col-md-12" style="padding:0px;margin:0px;">\n                  <ul class="eventsList">\n\n                    <li *ngFor="let event of eventsList" class="col-xs-12 mb-1 event_li_{{event.id}} events">\n\n                      <div class="card fadeIn animated" data-appear="appear" data-animation="fadeIn" style="margin:0px">\n                        <div class="card-header">\n                          <h4 class="card-title" style="text-transform: none;cursor:pointer" id="heading-multiple-icons" (click)="viewContent(event)">\n\n                            <span class="float-xs-left mr-1">\n                          <span class="tag tag-success" style="font-size: 75%">{{event.id}}</span>\n                        </span>\n                            {{event.name}}</h4>\n                          <a class="heading-elements-toggle" *ngIf="widgetAccess"><i class="icon-ellipsis font-medium-3"></i></a>\n                          <div class="heading-elements" *ngIf="widgetAccess">\n                            <ul class="list-inline mb-0">\n                              <li><a href="javascript:void(0)" title="View" (click)="viewContent(event)"><i\n                                class="icon-eye"></i></a></li>\n                              <li><a href="javascript:void(0)" title="Edit" (click)="openEditEventModal(event)"><i\n                                class="icon-edit2"></i></a></li>\n                              <li><a href="javascript:void(0)" title="Delete" (click)="openDeleteEventModal(event)"><i\n                                class="icon-trash2"></i></a></li>\n                            </ul>\n                          </div>\n                        </div>\n                        <div class="card-body collapse in event_{{event.id}} displayNone" style="display: none">\n                          <div class="card-block" style="cursor: pointer" (click)="viewContent(event)">\n                              <div class="row" style="max-height: 150px;overflow: auto;overflow-x: hidden">\n                                <div class="col-md-12">\n                                  <label class="inputKey">Subject: <b>{{event.subject}}</b></label><br>\n                                  <label class="inputKey">Content: </label>\n                                  <p style="font-size:13px">{{event.content}}</p>\n                                </div>\n                              </div>\n\n                            <p style="font-size:13px;font-weight:bold;text-align: right;padding: 0px;margin:0px;"> Total Registered Channels: {{regEventsCount}}</p>\n                          </div>\n                        </div>\n\n                      </div>\n\n                    </li>\n\n                  </ul>\n                </div>\n                <div class="col-md-12">\n                  <nav aria-label="Page navigation" *ngIf="msgPagination">\n                    <ul class="pagination pull-right" style="width:100%">\n                      <li class="col-md-6">\n                        <a (click)="loadPrevMsg()" href="javascript:void(0)" class="brown"\n                           aria-label="Previous">\n                          <span aria-hidden="true">&laquo; Previous</span>\n                        </a>\n                      </li>\n                      <li class="col-md-6" style="text-align:right">\n                        <a (click)="loadNxtMsg()" href="javascript:void(0)" class="brown"\n                           aria-label="Next">\n                          <span aria-hidden="true">Next &raquo;</span>\n                        </a>\n                      </li>\n                    </ul>\n                  </nav>\n                </div>\n\n              </div>\n              <div class="col-md-9" style="">\n\n                <div class="row" style="min-height:300px;    background-color: rgba(238, 238, 238, 0.33);">\n\n                  <div class="col-md-12" >\n\n                    <div class="table-responsive">\n                      <table class="table table-bordered" id="eventReg" style="width: 100%">\n                        <thead class="thead-inverse">\n                        <tr>\n                          <th *ngFor="let channel of channelsList;" class="col-xs-3">{{channel}}\n                            <a title="Register Event" class="btn btn-success btn-sm float-xs-right" href="javascript:void(0)" (click)="registerChannelEvent(channel)"><i class="icon-plus"></i></a>\n\n                          </th>\n                          \x3c!--<th>Address</th>--\x3e\n                          \x3c!--<th style="text-align: center">Actions</th>--\x3e\n                        </tr>\n                        </thead>\n                        <tbody>\n\n                        <tr>\n                          <td *ngFor="let channel of channelsList" style="padding:0px;border:0px;" class="col-xs-3">\n                            <ul class="adddressList">\n                              <li style="position: relative;width:100%" *ngFor="let address of resultList[channel]">\n\n                                <span class="addressSpan" title="{{address.address}}">{{address.address}}</span>\n\n                                <div  class="eventLink">\n                                  <a (click)="unregisterChannelEvent(address)" href="javascript:void(0)" class="black" title="Unregister Channel">\n                                    <i class="icon-unlink"></i>\n                                  </a>\n                                  <a (click)="sendTestMessage(address)" href="javascript:void(0)" class="black" title="Test Message">\n                                    <i class="icon-play-circle"></i>\n                                  </a>\n                                </div>\n                              </li>\n\n                              <li *ngIf="resultCount[channel] > 10" style="margin:0px !important;">\n\n\n                                <nav aria-label="Page navigation">\n                                  <ul class="pagination pull-right" style="width:100%">\n                                    <li class="col-md-6" style="margin:0px !important;">\n                                      <a (click)="loadPrevChannnel(channel)" href="javascript:void(0)" class="brown"\n                                         aria-label="Previous">\n                                        <span aria-hidden="true">&laquo; Previous</span>\n                                      </a>\n                                    </li>\n                                    <li class="col-md-6" style="text-align:right;margin:0px !important;">\n                                      <a (click)="loadNxtChannel(channel)" href="javascript:void(0)" class="brown"\n                                         aria-label="Next">\n                                        <span aria-hidden="true">Next &raquo;</span>\n                                      </a>\n                                    </li>\n                                  </ul>\n                                </nav>\n\n                                <p style="font-size:13px;font-weight:bold;text-align: center;padding:0px;margin:0px">Total: {{resultCount[channel]}}</p>\n\n\n\n                              </li>\n                            </ul>\n                          </td>\n                        </tr>\n\n                        \x3c!-- <tr *ngFor="let reg of regEventsList">\n                           <td>{{reg.id}}</td>\n                           <td>{{reg.channel}}</td>\n                           <td>{{reg.address}}</td>\n                           <td style="text-align: center">\n\n                             <a class="btn btn-sm btn-danger" href="javascript:void(0)" title="UnRegister Channel"\n                                (click)="openUnregisterChannelModal(reg)"><i class="icon-unlink"></i></a>\n\n                           </td>\n                         </tr>--\x3e\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n\n                  <div *ngIf="regEventsCount === 0" class="col-md-12 pt-2" style="text-align: center">\n                    <i class="icon-bell3 font-large-5"></i>\n                    <p class="font-medium-5 mt-1">No Channel(s) registered yet</p>\n\n                  </div>\n\n                </div>\n              </div>\n\n\n            </div>\n\n            <div *ngIf="eventsList.length === 0" style="text-align: center; padding:100px" class="grey">\n              <i class="icon-cubes font-large-5"></i>\n\n              <p class="font-medium-5 mt-1">No Event(s) Found in this domain.</p>\n\n            </div>\n\n\n\n\n\n\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n\n<div id="widgetModal_event" class="modal fade" tabindex="-1" role="dialog" style="">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\n          aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title"><i class="icon-bell3"></i> {{modal.title}}</h4>\n      </div>\n      <div class="modal-body" style="padding-top:0px">\n\n        <div class="row" style="margin-top:10px;">\n          <div class="col-md-6">\n            <div class="form-group">\n              <label class="inputLabel">Event Id</label>\n              <input type="number" class="form-control input-sm" placeholder="" readonly="{{modal.action}}"\n                     [(ngModel)]="eventObj.id">\n            </div>\n          </div>\n          <div class="col-md-6">\n            <div class="form-group">\n              <label class="inputLabel">Event Name</label>\n              <input type="text" class="form-control input-sm" placeholder=""\n                     [(ngModel)]="eventObj.name">\n            </div>\n          </div>\n        </div>\n        <div class="row" style="margin-top:10px;">\n          <div class="col-md-6">\n            <div class="form-group">\n              <label class="inputLabel">Event Subject</label>\n              <input type="text" class="form-control input-sm" placeholder=""\n                     [(ngModel)]="eventObj.subject">\n            </div>\n          </div>\n          <div class="col-md-6">\n\n          </div>\n        </div>\n        <div class="row">\n          <div class="col-md-12">\n            <div class="form-group">\n              <label class="inputLabel">Event Content</label>\n              <textarea [(ngModel)]="eventObj.content" class="form-control input-sm" style="height:100px"></textarea>\n            </div>\n          </div>\n        </div>\n\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default btn-border" data-dismiss="modal">Close</button>\n        <button type="button" class="btn btn-primary btn-orange" (click)="upsertEvent()">{{modal.button}}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div id="widgetModal_event_delete" class="modal fade" tabindex="-1" role="dialog" style="">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\n          aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title"><i class="icon-bell3"></i> Delete Event</h4>\n      </div>\n      <div class="modal-body" style="padding-top:0px">\n\n        <div class="row" style="margin-top:10px;">\n          <div class="col-md-12">\n            <p class="font-medium-3 grey"> Are you sure want to delete the <b>{{eventObj.name}}</b> event?</p>\n          </div>\n        </div>\n\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default btn-border" data-dismiss="modal">Close</button>\n        <button type="button" class="btn btn-primary btn-orange" (click)="deleteEvent()">Proceed</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n\n<div id="widgetModal_event_reg" class="modal fade" tabindex="-1" role="dialog" style="">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\n          aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title"><i class="icon-bell3"></i> Event Registration</h4>\n      </div>\n      <div class="modal-body" style="padding-top:0px">\n\n        <div class="row" style="margin-top:10px;">\n          <div class="col-md-6">\n            <div class="form-group">\n              <label class="inputLabel">Event Id</label>\n\n              <input type="text" readonly [(ngModel)]="eventRegObj.id"  class="form-control input-sm" />\n\n            </div>\n          </div>\n          <div class="col-md-6">\n            <div class="form-group">\n              <label class="inputLabel">Channel</label>\n              <select [(ngModel)]="eventRegObj.channel" class="form-control input-sm">\n                <option *ngFor="let channel of channelsList" value="{{channel}}">{{channel}}</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        <div class="row" style="margin-top:10px;">\n          <div class="col-md-12">\n            <div class="form-group" *ngIf="eventRegObj.channel !== \'FCM\'">\n              <label class="inputLabel">Notification Address <span style="font-size:11px;" class="grey">(email, phone, etc\u2026)</span></label>\n              <input [(ngModel)]="eventRegObj.address" class="form-control input-sm" />\n            </div>\n\n            <div class="form-group" *ngIf="eventRegObj.channel === \'FCM\'">\n              <label class="inputLabel">Choose Device</label>\n              <select [(ngModel)]="eventRegObj.address" class="form-control input-sm">\n                <option *ngFor="let fcm of deviceFCMList" value="{{fcm.id}}">{{fcm.name}} | {{fcm.modelId}}</option>\n              </select>\n            </div>\n          </div>\n        </div>\n\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default btn-border" data-dismiss="modal">Close</button>\n        <button type="button" class="btn btn-primary btn-orange" (click)="registerEvent()"> Register Event\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n\n<div id="widgetModal_event_unreg" class="modal fade" tabindex="-1" role="dialog" style="">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\n          aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title"><i class="icon-bell3"></i> UnRegister Channel</h4>\n      </div>\n      <div class="modal-body" style="padding-top:0px">\n\n        <div class="row" style="margin-top:10px;">\n          <div class="col-md-12">\n            <p class="font-medium-3 grey"> Are you sure want to un-register this <b>{{eventRegObj.address}}</b> from {{eventRegObj.channel}}?</p>\n          </div>\n        </div>\n\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default btn-border" data-dismiss="modal">Close</button>\n        <button type="button" class="btn btn-primary btn-orange" (click)="unregisterEvent()">Proceed</button>\n      </div>\n    </div>\n  </div>\n</div>\n'}});