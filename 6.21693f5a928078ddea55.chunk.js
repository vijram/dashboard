webpackJsonp([6],{"3o9N":function(e,t){e.exports='<div class="app-content content container-fluid">\n  <div class="content-wrapper">\n    <div class="content-body"><div id="user-profile">\n      <div class="row">\n        <div class="col-xs-12">\n          <div class="card profile-with-cover">\n            \x3c!--<div class="card-img-top img-fluid bg-cover height-300" style="background: url(\'../../../app-assets/images/carousel/22.jpg\') 50%;"></div>--\x3e\n            <div class="card-img-top img-fluid bg-cover {{profile.background}} height-100" style=""></div>\n            <div class="media profil-cover-details">\n              <div class="media-left pl-2 pt-2">\n                <a href="javascript:void(0)" class="profile-image">\n                  <img src="{{profile.photo}}" class="rounded-circle img-border height-100" alt="Card image">\n                </a>\n              </div>\n              <div class="media-body media-middle row;" style="overflow: visible">\n                <div class="col-xs-6">\n                  <h3 class="card-title">{{userObj.firstName}} {{userObj.lastName}} <br>\n                    <a *ngIf="profileState" href="javascript:void(0)" (click)="uploadPhoto()" style="font-size:11px;color:#fff;font-weight:normal"><i class="icon-ios-camera-outline"></i> upload profile photo</a>\n                  </h3>\n\n                  <input id="profilePhoto" style="display:none" type=\'file\' (change)="readFile($event);" />\n\n\n                </div>\n                <div class="col-xs-6 text-xs-right" *ngIf="profileState">\n\n                  <div class="btn-group mr-1 bg-outline-white" style="border: 1px solid #fff;" >\n                    <button type="button" class="btn dropdown-toggle {{profile.background}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n                      <span class="" style="color:#fff">Change Background Color</span>\n                    </button>\n                    <div class="dropdown-menu open-left arrow" style="height:200px;overflow: scroll;overflow-x: hidden;width:50px;z-index:999999">\n                      <a class="custom-dropdown-item {{color}}" *ngFor="let color of bgColors" style="width:100%;height:20px;" (click)="setColorClass(color)"></a>\n                    </div>\n\n                  </div>\n\n                  <button type="button" class="btn btn-orange" *ngIf="!profileUpdate" (click)="editProfile()"><i class="icon-edit"></i> Edit</button>\n                </div>\n              </div>\n            </div>\n            <div class="card-body">\n\n              <div class="card-block" *ngIf="profileUpdate">\n\n                <div class="row" style="margin-top:10px;" >\n                  <div class="col-md-3">\n                    <div class="form-group">\n                      <label class="inputLabel">First Name</label>\n                      <input type="text" class="form-control input-sm" placeholder="" [(ngModel)]="userObj.firstName">\n                    </div>\n                  </div>\n                  <div class="col-md-3">\n                    <div class="form-group">\n                      <label class="inputLabel">Last Name</label>\n                      <input type="text" class="form-control input-sm" placeholder="" [(ngModel)]="userObj.lastName">\n                    </div>\n                  </div>\n\n                </div>\n\n                <div class="row" style="margin-top:10px;">\n                  <div class="col-md-3">\n                    <div class="form-group">\n                      <label class="inputLabel">Email Id</label>\n                      <p><b>{{userObj.email}}</b></p>\n                    </div>\n                  </div>\n                </div>\n                <div class="row" style="margin-top:10px;">\n                  <div class="col-md-3">\n                    <div class="form-group" style="background-color: #eee;padding:10px;">\n                      <label class="inputLabel">Update password</label>\n                      <input type="password" class="form-control input-sm" placeholder="" [(ngModel)]="userObj.password">\n                      <button class="btn btn-block btn-warning mt-1 btn-sm" (click)="updatePassword()" >Change Password</button>\n                    </div>\n                  </div>\n                </div>\n\n                <div class="row" style="margin-top:10px;">\n                  <div class="col-md-3">\n                    <div class="form-group">\n                      <label class="inputLabel">Country</label>\n                      <select class="form-control" (ngModelChange)="loadState($event)" name="country"  [(ngModel)]="userObj.country">\n                        <option value="" selected>Choose Country</option>\n                        <option *ngFor="let country of countryList;" value="{{country.name}}">{{country.name}} ({{country.code}})</option>\n                      </select>\n                    </div>\n                  </div>\n                  <div class="col-md-3">\n                    <div class="form-group">\n                      <label class="inputLabel">State</label>\n                      <select class="form-control" [(ngModel)]="userObj.state" name="state">\n                        <option value="" selected>Choose State</option>\n                        <option *ngFor="let state of stateList;" value="{{state.name}}">{{state.name}} ({{state.code}})</option>\n                      </select>\n                    </div>\n                  </div>\n                </div>\n                <div class="row" style="margin-top:10px;">\n                  <div class="col-md-3">\n                    <div class="form-group">\n                      <label class="inputLabel">TimeZone</label>\n                      <select class="form-control" [(ngModel)]="userObj.timezone" name="timezone">\n                        <option value="" selected>Choose Timezone</option>\n                        <option *ngFor="let timezone of timezoneList" value="{{timezone}}">{{timezone}}</option>\n                      </select>\n                    </div>\n                  </div>\n                  <div class="col-md-6">\n                    <div class="form-group">\n                    </div>\n                  </div>\n                </div>\n\n\n                <div class="row mt-3" style="">\n                  <div class="col-md-12" style="text-align:center">\n                    <button class="btn btn-outline-orange" (click)="updateProfile()"> Update Profile</button>\n                    <button class="btn btn-outline-orange ml-1" (click)="cancelUpdateProfile()"> Cancel</button>\n                  </div>\n                </div>\n\n\n              </div>\n\n\n              <div class="card-block" *ngIf="!profileUpdate">\n\n                <div class="row" style="margin-top:10px;" >\n                  <div class="col-md-4">\n                    <div class="form-group">\n                      <label class="inputLabel">First Name</label>\n                      <p><b>{{userObj.firstName}}</b></p>\n                    </div>\n                  </div>\n                  <div class="col-md-4">\n                    <div class="form-group">\n                      <label class="inputLabel">Last Name</label>\n                      <p><b>{{userObj.lastName}}</b></p>\n                    </div>\n                  </div>\n                </div>\n\n                <div class="row" style="margin-top:10px;">\n                  <div class="col-md-4">\n                    <div class="form-group">\n                      <label class="inputLabel">Email Id</label>\n                      <p><b>{{userObj.email}}</b></p>\n                    </div>\n                  </div>\n                  <div class="col-md-4">\n                  </div>\n                </div>\n                <div class="row" style="margin-top:10px;">\n                  <div class="col-md-4">\n                    <div class="form-group">\n                      <label class="inputLabel">Timezone</label>\n                      <p><b>{{userObj.timezone}}</b></p>\n                    </div>\n                  </div>\n                  <div class="col-md-4">\n                    <div class="form-group">\n                      <label class="inputLabel">Country</label>\n                      <p><b>{{userObj.country}}</b></p>\n                    </div>\n                  </div>\n                  <div class="col-md-4">\n                    <div class="form-group">\n                      <label class="inputLabel">State</label>\n                      <p><b>{{userObj.state}}</b></p>\n                    </div>\n                  </div>\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    </div>\n  </div>\n</div>\n'},"84dI":function(e,t,o){t=e.exports=o("rP7Y")(!1),t.push([e.i,".inputLabel{font-size:13px;color:#999}.custom-dropdown-item{padding:3px 10px;font-weight:400;color:#373a3c;text-align:inherit;white-space:nowrap;background:none;border:1px solid #eee;margin:3px;display:inline-block}",""]),e.exports=e.exports.toString()},mRHZ:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("/oeL"),s=o("qbdv"),i=o("bm2B"),r=o("CPp0"),a=o("BkNc"),l=o("FEt5"),c=o("Htb7"),d=o("+K4P"),p=o("FyM1"),u=o("7qx0"),f=o("hccZ"),b=o("dXww"),v=o("qVIN"),h=o("hZvQ"),m=this&&this.__decorate||function(e,t,o,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,o,r):s(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},g=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},y=function(){function e(e,t,o,n,s,i,r,a,l){this.router=e,this.route=t,this._cookieService=o,this._createUpdateUserApi=n,this._RetreiveUserPropertyApi=s,this._retreiveUserApi=i,this._createUpdateUserPropertyApi=r,this._changeUserPasswordApi=a,this.http=l,this.notification=new b.a,this.utility=new v.a,this.userObj={},this.showKey=!1,this.profileState=!1,this.obj={},this.bgColors=c.a,this.userproperty="user.profile",this.countryList=[],this.stateList=[],this.timezoneList=[],this.profile={photo:"../../../assets/images/avatar-s-8.png",background:c.a[0]},this.profileUpdate=!1}return e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){var e=this;this.loadCountry(),this.loadTimezone(),this.obj=JSON.parse(this._cookieService.get("user_details")),this.userObj=this.obj.user,this.route.params.subscribe(function(t){e.getUserData(t.id),e.profileState=e.utility.checkBoolean(t.state)})},e.prototype.loadCountry=function(){var e=this;this.http.get("/assets/data/countries.json").subscribe(function(t){return e.countryList=t.json()}),setTimeout(function(){e.userObj.state&&e.loadState(e.userObj.country)},500)},e.prototype.loadState=function(e){for(var t=this,o=this,n=0;n<this.countryList.length;n++)o.countryList[n].name===e&&this.http.get("/assets/data/countries/"+o.countryList[n].filename+".json").subscribe(function(e){return t.stateList=e.json()});this.stateList.sort()},e.prototype.loadTimezone=function(){var e=this;this.http.get("/assets/data/timezones.json").subscribe(function(t){for(var o=JSON.parse(t._body),n=0;n<o.length;n++)if(o[n].utc)for(var s=0;s<o[n].utc.length;s++)e.timezoneList.push(o[n].utc[s]);e.timezoneList.sort()})},e.prototype.checkUserProperty=function(){var e=this;this._RetreiveUserPropertyApi.getUserProperty(this.obj.token,this.userObj.email,this.userproperty).subscribe(function(t){e.profile=JSON.parse(t.value)},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in getting user property"))})},e.prototype.getUserData=function(e){var t=this;this._retreiveUserApi.getUser(this.obj.token,e).subscribe(function(e){t.userObj=e,t.userObj.password="",t.checkUserProperty()},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in getting user property"))})},e.prototype.toggleKey=function(){this.showKey=!this.showKey},e.prototype.editProfile=function(){this.profileUpdate=!0},e.prototype.updatePassword=function(){var e=this;if(""===this.userObj.password)return!1;this._changeUserPasswordApi.changeUserPassword(this.obj.token,this.userObj.email,this.userObj.password).subscribe(function(t){e.notification.send("top","success","password updated successfully!")},function(t){t&&417===t.status&&(console.log("Error :",t),console.log("Error in updating password"),e.notification.send("top","error","Error in updating password!"))})},e.prototype.cancelUpdateProfile=function(){this.profileUpdate=!1},e.prototype.updateProfile=function(){var e=this;this._createUpdateUserApi.upsertUser(this.obj.token,this.userObj).subscribe(function(t){e.obj.user=e.userObj,e._cookieService.putObject("user_details",e.obj),e.notification.send("top","success","Profile updated successfully!"),e.profileUpdate=!1,location.reload()},function(t){t&&(417===t.status&&(console.log("Error :",t),console.log("Error in profile update")),e.notification.send("top","error","Error in profile update"))})},e.prototype.uploadPhoto=function(){$("#profilePhoto").click()},e.prototype.readFile=function(e){var t=this;if(e.srcElement.files&&e.srcElement.files[0]&&e.srcElement.files[0].size<=5e5){var o=new FileReader;o.addEventListener("load",function(e){t.profile.photo=e.target.result,t.updateUserProperty()}),o.readAsDataURL(e.srcElement.files[0])}else this.notification.send("top","error","Image size should be less than 500kb!")},e.prototype.setColorClass=function(e){this.profile.background=e,this.updateUserProperty()},e.prototype.updateUserProperty=function(){var e=this,t={name:this.userproperty,value:JSON.stringify(this.profile),userId:this.userObj.email};this._createUpdateUserPropertyApi.storeUserProperty(this.obj.token,t).subscribe(function(t){e.notification.send("top","success","User profile updated successfully!")},function(t){t&&417===t.status&&(console.log("Error :",t),console.log("Error in user profile update")),e.notification.send("top","error","Error in user profile updation!")})},e}();y=m([Object(n.Component)({selector:"app-profile",template:o("3o9N"),styles:[o("84dI")]}),g("design:paramtypes",["function"==typeof(j=void 0!==a.c&&a.c)&&j||Object,"function"==typeof(w=void 0!==a.a&&a.a)&&w||Object,"function"==typeof(O=void 0!==l.CookieService&&l.CookieService)&&O||Object,"function"==typeof(U=void 0!==d.a&&d.a)&&U||Object,"function"==typeof(x=void 0!==f.a&&f.a)&&x||Object,"function"==typeof(P=void 0!==p.a&&p.a)&&P||Object,"function"==typeof(k=void 0!==u.a&&u.a)&&k||Object,"function"==typeof(L=void 0!==h.a&&h.a)&&L||Object,"function"==typeof(C=void 0!==r.b&&r.b)&&C||Object])],y);var j,w,O,U,x,P,k,L,C,_=[{path:"profile/:id/:state",component:y}];o.d(t,"ProfileModule",function(){return z});var E=this&&this.__decorate||function(e,t,o,n){var s,i=arguments.length,r=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(i<3?s(r):i>3?s(t,o,r):s(t,o))||r);return i>3&&r&&Object.defineProperty(t,o,r),r},z=function(){function e(){}return e}();z=E([Object(n.NgModule)({imports:[s.CommonModule,r.c,i.a,a.d.forChild(_)],declarations:[y],providers:[d.a,p.a,u.a,f.a,h.a]})],z)}});