webpackJsonp([7],{GzmA:function(e,t,n){t=e.exports=n("rP7Y")(!1),t.push([e.i,".actionMenuItem{font-size:13px}.inputLabel{color:#ff9700;display:block}.inputLabel,.inputLabelGrey{text-transform:uppercase;font-size:9px;font-weight:800}.inputLabelGrey{color:#666}.templateList li .card-body:hover{background-color:hsla(0,0%,93%,.38)}.card .card-title{font-size:1rem}.card-header .heading-elements,.card-header .heading-elements-toggle{top:6px}",""]),e.exports=e.exports.toString()},Y8Qu:function(e,t){e.exports='<style>\n  .nav.nav-tabs.nav-top-border .nav-item a.nav-link.active {\n    border-top: 3px solid #FF9800;\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n    color: #555;\n  }\n\n  .nav.nav-tabs.nav-top-border .nav-item a {\n    color: #9E9E9E;\n  }\n</style>\n<div class="app-content content container-fluid" style="">\n  <div class="content-wrapper">\n    <div class="content-header row">\n\n      <h3 class="content-header-title mb-0"><i class="icon-cubes"></i> Manage Templates\n\n        <a href="javascript:void(0)" class="btn btn-orange float-xs-right " style="color:#fff"\n           (click)="openAddTemplateModal()">\n          <i class="icon-plus" style="color:#fff"></i> Add\n        </a>\n\n        <a href="javascript:void(0)" class="btn btn-orange float-xs-right mr-1" style="color:#fff"\n           (click)="openUploadTemplateModal()">\n          <i class="icon-upload" style="color:#fff"></i> Upload\n        </a>\n\n        <a href="javascript:void(0)" class="btn btn-orange float-xs-right mr-1" style="color:#fff"\n           (click)="downloadTemplate()">\n          <i class="icon-download" style="color:#fff"></i> Download\n        </a>\n      </h3>\n\n      <hr>\n\n    </div>\n    <div class="content-body match-height" style="height:77vh">\n\n      <div class="card" style="">\n        <div class="card-header" *ngIf="templateList.length > 0">\n          <h4 class="card-title">Total Templates : {{templateCount}}</h4>\n          <a class="heading-elements-toggle"><i class="icon-ellipsis font-medium-3"></i></a>\n          <div class="heading-elements">\n            <ul class="list-inline mb-0">\n              <li><a data-action="reload"><i class="icon-reload"></i></a></li>\n              <li><a data-action="expand"><i class="icon-expand2"></i></a></li>\n            </ul>\n          </div>\n        </div>\n        <div class="card-body collapse in">\n          <div class="card-block">\n            <div class="row" *ngIf="viewSystem">\n              <div class="col-md-6 mb-1">\n                <label class="inputLabel">Choose System <span style="font-size: 11px;" class="grey">* Only Admin can see this option</span></label>\n                <select [(ngModel)]="system" class="form-control input-sm"\n                        (ngModelChange)="setSystem($event)" style="width:100px">\n                  <option *ngFor="let sys of systemList" value="{{sys}}">{{sys}}</option>\n                </select>\n              </div>\n            </div>\n\n            <div class="row" *ngIf="templateList.length > 0">\n\n              <div class="col-md-12">\n                <ul class="templateList">\n\n                  <li *ngFor="let template of templateList" class="col-lg-4 col-md-6 col-xs-12 ">\n\n                    <div class="card zoomIn animated" data-appear="appear" data-animation="zoomIn">\n                      <div class="card-header card-head-inverse" style="background-color: #1d2b36">\n                        <h4 class="card-title" style="text-transform: none" id="heading-multiple-icons">\n                          {{template.name}}</h4>\n                        <a class="heading-elements-toggle"><i class="icon-ellipsis font-medium-3"></i></a>\n                        <div class="heading-elements">\n                          <ul class="list-inline mb-0" *ngIf="!viewSystem">\n                            <li><a href="javascript:void(0)" title="Edit" (click)="openEditTemplateModal(template)"><i\n                              class="icon-edit2"></i></a></li>\n                            <li><a href="javascript:void(0)" title="Delete" (click)="openDeleteTemplateModal(template)"><i\n                              class="icon-trash2"></i></a></li>\n                          </ul>\n                        </div>\n                      </div>\n                      <div class="card-body collapse in">\n                        <div class="card-block" style="height: 150px;overflow: auto">\n                          <code class="card-text">{{template.code}}</code>\n                        </div>\n                      </div>\n                      <div class="card-footer text-muted">\n                        <span>Language</span>\n                        <span class="float-xs-right">\n                          <span class="tag tag-default" style="font-size: 60%">{{template.lang}}</span>\n                        </span>\n                      </div>\n                    </div>\n\n                  </li>\n\n                </ul>\n              </div>\n            </div>\n\n\n            <div *ngIf="templateList.length === 0" style="text-align: center; padding:100px" class="grey">\n              <i class="icon-cubes font-large-5"></i>\n\n              <p class="font-medium-5 mt-1">No Template(s) Found in this domain.</p>\n\n            </div>\n\n\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n<div id="widgetModal_template" class="modal fade" tabindex="-1" role="dialog" style="">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\n          aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title"><i class="icon-cubes"></i> {{modal.title}}</h4>\n      </div>\n      <div class="modal-body" style="padding-top:0px">\n\n        <div class="row" style="margin-top:10px;">\n          <div class="col-md-6">\n            <div class="form-group">\n              <label class="inputLabel">Template Name</label>\n              <input type="text" class="form-control input-sm" placeholder="" readonly="{{modal.action}}"\n                     [(ngModel)]="templateObj.name">\n            </div>\n          </div>\n          <div class="col-md-6">\n\n          </div>\n        </div>\n        <div class="row">\n          <div class="col-md-12">\n            <div class="form-group">\n              <label class="inputLabel">Code</label>\n              <textarea [(ngModel)]="templateObj.code" class="form-control input-sm"></textarea>\n            </div>\n          </div>\n        </div>\n\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default btn-border" data-dismiss="modal">Close</button>\n        <button type="button" class="btn btn-primary btn-orange" (click)="upsertTemplateModal()">{{modal.button}}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div id="widgetModal_template_upload" class="modal fade" tabindex="-1" role="dialog" style="">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\n          aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title"><i class="icon-cubes"></i> Upload Template</h4>\n      </div>\n\n      <form name="templateForm" enctype="multipart/form-data" (ngSubmit)="uploadTemplate(templateForm)"\n            #templateForm="ngForm" novalidate autocomplete="off">\n\n        <div class="modal-body" style="padding-top:0px">\n\n          <div class="row mt-1">\n            <div class="col-md-12">\n              <div class="form-group">\n                <label class="inputLabel">Choose Template file</label>\n                <input type="file" name="tfile" id="templateFile" [(ngModel)]="templateObj.tfile" #tfile="ngModel">\n              </div>\n            </div>\n          </div>\n\n\n        </div>\n\n        <div class="modal-footer">\n          <button type="button" class="btn btn-default btn-border" data-dismiss="modal">Close</button>\n          <button type="submit" id="uploadBtn" [disabled]="!templateForm.valid" class="btn btn-primary btn-orange">\n            Upload Template\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n\n<div id="widgetModal_template_delete" class="modal fade" tabindex="-1" role="dialog" style="">\n  <div class="modal-dialog" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\n          aria-hidden="true">&times;</span></button>\n        <h4 class="modal-title"><i class="icon-cubes"></i> Delete template</h4>\n      </div>\n      <div class="modal-body" style="padding-top:0px">\n\n        <div class="row" style="margin-top:10px;">\n          <div class="col-md-12">\n            <p class="font-medium-3 grey"> Are you sure want to delete the <b>{{templateObj.name}}</b> template?</p>\n          </div>\n        </div>\n\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default btn-border" data-dismiss="modal">Close</button>\n        <button type="button" class="btn btn-primary btn-orange" (click)="deleteTemplateModel()">Proceed</button>\n      </div>\n    </div>\n  </div>\n</div>\n'},ePvG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("/oeL"),o=n("qbdv"),i=n("bm2B"),s=n("CPp0"),l=n("BkNc"),r=n("FEt5"),d=n("bXVx"),c=(n("5v8a"),n("ww/K")),p=n("ue/A"),u=n("FMac"),f=this&&this.__decorate||function(e,t,n,a){var o,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},m=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=this&&this.__param||function(e,t){return function(n,a){t(n,a,e)}},b=function(){function e(e,t,n){this.http=e,this.basePath=d.a.basePath,this.defaultHeaders=new s.a,this.configuration=new p.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.uploadTemplates=function(e,t,n,a){return this.uploadTemplatesWithHttpInfo(e,t,n,a).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.uploadTemplatesWithHttpInfo=function(e,t,n,a){var o=this.basePath+"/templates/upload/${atoken}".replace("${atoken}",String(e)),i=new s.f,l=new s.a(this.defaultHeaders.toJSON()),r=new s.f;if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling uploadTemplates.");if(null===t||void 0===t)throw new Error("Required parameter jsonfile was null or undefined when calling uploadTemplates.");void 0!==n&&i.set("system",n);l.set("Content-Type","application/x-www-form-urlencoded"),void 0!==t&&r.set("jsonfile",t);var d=new s.e({method:s.d.Post,headers:l,body:r.toString(),search:i});return a&&(d=Object.assign(d,a)),this.http.request(o,d)},e}();b=f([Object(a.Injectable)(),h(1,Object(a.Optional)()),h(1,Object(a.Inject)(c.a)),h(2,Object(a.Optional)()),m("design:paramtypes",["function"==typeof(v=void 0!==u.a&&u.a)&&v||Object,String,"function"==typeof(g=void 0!==p.a&&p.a)&&g||Object])],b);var v,g,y=this&&this.__decorate||function(e,t,n,a){var o,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},w=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},j=this&&this.__param||function(e,t){return function(n,a){t(n,a,e)}},O=function(){function e(e,t,n){this.http=e,this.basePath=d.a.basePath,this.defaultHeaders=new s.a,this.configuration=new p.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.upsertTemplate=function(e,t,n,a){return this.upsertTemplateWithHttpInfo(e,t,n,a).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.upsertTemplateWithHttpInfo=function(e,t,n,a){var o=this.basePath+"/templates/upsert/${atoken}".replace("${atoken}",String(e)),i=new s.f,l=new s.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling upsertTemplate.");if(null===t||void 0===t)throw new Error("Required parameter entity was null or undefined when calling upsertTemplate.");void 0!==n&&i.set("system",n);l.set("Content-Type","application/json");var r=new s.e({method:s.d.Post,headers:l,body:null==t?"":JSON.stringify(t),search:i});return a&&(r=Object.assign(r,a)),this.http.request(o,r)},e}();O=y([Object(a.Injectable)(),j(1,Object(a.Optional)()),j(1,Object(a.Inject)(c.a)),j(2,Object(a.Optional)()),w("design:paramtypes",["function"==typeof(T=void 0!==u.a&&u.a)&&T||Object,String,"function"==typeof(_=void 0!==p.a&&p.a)&&_||Object])],O);var T,_,R=this&&this.__decorate||function(e,t,n,a){var o,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},P=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},S=this&&this.__param||function(e,t){return function(n,a){t(n,a,e)}},k=function(){function e(e,t,n){this.http=e,this.basePath=d.a.basePath,this.defaultHeaders=new s.a,this.configuration=new p.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.deleteTemplate=function(e,t,n,a){return this.deleteTemplateWithHttpInfo(e,t,n,a).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.deleteTemplateWithHttpInfo=function(e,t,n,a){var o=this.basePath+"/templates/delete/${atoken}/${name}".replace("${atoken}",String(e)).replace("${name}",String(t)),i=new s.f,l=new s.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling deleteTemplate.");if(null===t||void 0===t)throw new Error("Required parameter name was null or undefined when calling deleteTemplate.");void 0!==n&&i.set("system",n);var r=new s.e({method:s.d.Delete,headers:l,search:i});return a&&(r=Object.assign(r,a)),this.http.request(o,r)},e}();k=R([Object(a.Injectable)(),S(1,Object(a.Optional)()),S(1,Object(a.Inject)(c.a)),S(2,Object(a.Optional)()),P("design:paramtypes",["function"==typeof(I=void 0!==u.a&&u.a)&&I||Object,String,"function"==typeof(x=void 0!==p.a&&p.a)&&x||Object])],k);var I,x,E=this&&this.__decorate||function(e,t,n,a){var o,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},M=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},H=this&&this.__param||function(e,t){return function(n,a){t(n,a,e)}},L=function(){function e(e,t,n){this.http=e,this.basePath=d.a.basePath,this.defaultHeaders=new s.a,this.configuration=new p.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.downloadTemplates=function(e,t,n){return this.downloadTemplatesWithHttpInfo(e,t,n).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.downloadTemplatesWithHttpInfo=function(e,t,n){var a=this.basePath+"/templates/download/${atoken}".replace("${atoken}",String(e)),o=new s.f,i=new s.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling downloadTemplates.");void 0!==t&&o.set("system",t);var l=new s.e({method:s.d.Get,headers:i,search:o});return n&&(l=Object.assign(l,n)),this.http.request(a,l)},e}();L=E([Object(a.Injectable)(),H(1,Object(a.Optional)()),H(1,Object(a.Inject)(c.a)),H(2,Object(a.Optional)()),M("design:paramtypes",["function"==typeof(C=void 0!==u.a&&u.a)&&C||Object,String,"function"==typeof(q=void 0!==p.a&&p.a)&&q||Object])],L);var C,q,A=this&&this.__decorate||function(e,t,n,a){var o,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},F=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},N=this&&this.__param||function(e,t){return function(n,a){t(n,a,e)}},D=function(){function e(e,t,n){this.http=e,this.basePath=d.a.basePath,this.defaultHeaders=new s.a,this.configuration=new p.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.listTemplates=function(e,t,n,a,o,i){return this.listTemplatesWithHttpInfo(e,t,n,a,o,i).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.listTemplatesWithHttpInfo=function(e,t,n,a,o,i){var l=this.basePath+"/templates/list/${atoken}/${pageSize}".replace("${atoken}",String(e)).replace("${pageSize}",String(t)),r=new s.f,d=new s.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling listTemplates.");if(null===t||void 0===t)throw new Error("Required parameter pageSize was null or undefined when calling listTemplates.");void 0!==n&&r.set("system",n),void 0!==a&&r.set("direction",a),void 0!==o&&r.set("name",o);var c=new s.e({method:s.d.Get,headers:d,search:r});return i&&(c=Object.assign(c,i)),this.http.request(l,c)},e}();D=A([Object(a.Injectable)(),N(1,Object(a.Optional)()),N(1,Object(a.Inject)(c.a)),N(2,Object(a.Optional)()),F("design:paramtypes",["function"==typeof(W=void 0!==u.a&&u.a)&&W||Object,String,"function"==typeof(z=void 0!==p.a&&p.a)&&z||Object])],D);var W,z,J=this&&this.__decorate||function(e,t,n,a){var o,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},U=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},G=this&&this.__param||function(e,t){return function(n,a){t(n,a,e)}},B=function(){function e(e,t,n){this.http=e,this.basePath=d.a.basePath,this.defaultHeaders=new s.a,this.configuration=new p.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.mergeTemplate=function(e,t,n,a,o){return this.mergeTemplateWithHttpInfo(e,t,n,a,o).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.mergeTemplateWithHttpInfo=function(e,t,n,a,o){var i=this.basePath+"/templates/merge/${atoken}/${name}".replace("${atoken}",String(e)).replace("${name}",String(t)),l=new s.f,r=new s.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling mergeTemplate.");if(null===t||void 0===t)throw new Error("Required parameter name was null or undefined when calling mergeTemplate.");if(null===n||void 0===n)throw new Error("Required parameter mergeContent was null or undefined when calling mergeTemplate.");void 0!==a&&l.set("system",a);r.set("Content-Type","application/json");var d=new s.e({method:s.d.Post,headers:r,body:null==n?"":JSON.stringify(n),search:l});return o&&(d=Object.assign(d,o)),this.http.request(i,d)},e}();B=J([Object(a.Injectable)(),G(1,Object(a.Optional)()),G(1,Object(a.Inject)(c.a)),G(2,Object(a.Optional)()),U("design:paramtypes",["function"==typeof(V=void 0!==u.a&&u.a)&&V||Object,String,"function"==typeof(X=void 0!==p.a&&p.a)&&X||Object])],B);var V,X,Y=this&&this.__decorate||function(e,t,n,a){var o,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},K=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Q=this&&this.__param||function(e,t){return function(n,a){t(n,a,e)}},Z=function(){function e(e,t,n){this.http=e,this.basePath=d.a.basePath,this.defaultHeaders=new s.a,this.configuration=new p.a,t&&(this.basePath=t),n&&(this.configuration=n)}return e.prototype.getTemplate=function(e,t,n,a){return this.getTemplateWithHttpInfo(e,t,n,a).map(function(e){return 204===e.status?void 0:e.json()||{}})},e.prototype.getTemplateWithHttpInfo=function(e,t,n,a){var o=this.basePath+"/templates/get/${atoken}/${name}".replace("${atoken}",String(e)).replace("${name}",String(t)),i=new s.f,l=new s.a(this.defaultHeaders.toJSON());if(null===e||void 0===e)throw new Error("Required parameter atoken was null or undefined when calling getTemplate.");if(null===t||void 0===t)throw new Error("Required parameter name was null or undefined when calling getTemplate.");void 0!==n&&i.set("system",n);var r=new s.e({method:s.d.Get,headers:l,search:i});return a&&(r=Object.assign(r,a)),this.http.request(o,r)},e}();Z=Y([Object(a.Injectable)(),Q(1,Object(a.Optional)()),Q(1,Object(a.Inject)(c.a)),Q(2,Object(a.Optional)()),K("design:paramtypes",["function"==typeof(ee=void 0!==u.a&&u.a)&&ee||Object,String,"function"==typeof(te=void 0!==p.a&&p.a)&&te||Object])],Z);var ee,te,ne=n("dXww"),ae=n("qVIN"),oe=this&&this.__decorate||function(e,t,n,a){var o,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},ie=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},se=function(){function e(e,t,n,a,o,i,s,l,r){this.router=e,this._cookieService=t,this._createUpdateTemplateApi=n,this._mergeATemplateApi=a,this._listTemplatesApi=o,this._deleteATemplateApi=i,this._uploadTemplatesApi=s,this._retreiveTemplateApi=l,this._downloadTemplatesApi=r,this.notification=new ne.a,this.utility=new ae.a,this.userObj={},this.templateObj={},this.modal={},this.system=!1,this.viewSystem=!1,this.templateList=[],this.systemList=[!0,!1],this.templateCount=0,this.msgPageSize=100}return e.prototype.ngOnDestroy=function(){},e.prototype.ngOnInit=function(){this.userObj&&(this.userObj=JSON.parse(this._cookieService.get("user_details"))),"admin"===this.userObj.user.roles[0]&&(this.viewSystem=!0),this.loadTemplateList()},e.prototype.setSystem=function(e){this.system=this.utility.checkBoolean(e),this.loadTemplateList()},e.prototype.loadTemplateList=function(){var e=this;this._listTemplatesApi.listTemplates(this.userObj.token,this.msgPageSize,this.system,null,null).subscribe(function(t){e.templateList=t,e.templateCount=t.length},function(e){e&&417===e.status&&(console.log("Error :",e),console.log("Error in getting template list"))})},e.prototype.uploadFile=function(e,t){var n=this;return new Promise(function(a,o){var i=new XMLHttpRequest;i.onreadystatechange=function(){4===i.readyState&&(200===i.status?($("#widgetModal_template_upload").modal("hide"),n.loadTemplateList(),n.notification.send("top","success","New Template uploaded successfully!"),a(JSON.parse(i.response))):(n.notification.send("top","error","Error in template upload!"),o(i.response)),$("#uploadBtn").html("Upload Template"))},i.open("POST",d.a.basePath+"/templates/upload/"+n.userObj.token+"?system="+t,!0);var s=new FormData;s.append("jsonfile",e,e.name),i.send(s)})},e.prototype.uploadTemplate=function(e){var t=this,n=document.getElementById("templateFile"),a=n.files;if(0===a.length)return t.notification.send("top","error","File not found. select a file to start upload"),this.system;this.uploadFile(a[0],this.system),$("#uploadBtn").html('<i class="icon-spinner icon-spin"></i> Uploading in progress')},e.prototype.deleteTemplateModel=function(){var e=this;this._deleteATemplateApi.deleteTemplate(this.userObj.token,this.templateObj.name,this.templateObj.system).subscribe(function(t){$("#widgetModal_template_delete").modal("hide"),e.notification.send("top","success","Template deleted successfully!"),e.loadTemplateList()},function(t){t&&417===t.status&&(console.log("Error :",t),console.log("Error in deleting template"),e.notification.send("top","error","Error in template delete!"))})},e.prototype.saveData=function(e){var t=document.createElement("a");document.body.appendChild(t),t.id="downloadFile",$("#downloadFile").css("display","none");var n="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e));t.href=n,t.download=this.userObj.domainKey+"_templates.json",t.click(),window.URL.revokeObjectURL(n)},e.prototype.downloadTemplate=function(){var e=this;this._downloadTemplatesApi.downloadTemplates(this.userObj.token,this.system).subscribe(function(t){e.saveData(t)},function(t){t&&417===t.status&&(console.log("Error :",t),console.log("Error in downloading template"),e.notification.send("top","error","Error in downloading!"))})},e.prototype.upsertTemplateModal=function(){var e=this;this.templateObj.lang="JTWIG",this._createUpdateTemplateApi.upsertTemplate(this.userObj.token,this.templateObj,this.system).subscribe(function(t){$("#widgetModal_template").modal("hide"),e.loadTemplateList(),e.notification.send("top","success","Template create/update successfully!")},function(t){t&&417===t.status&&(console.log("Error :",t),console.log("Error in getting template create/update"),e.notification.send("top","error","Error in template create/update!"))})},e.prototype.openAddTemplateModal=function(){this.modal={title:"Add New Template",button:"Create Template",action:"",disabled:!0},this.templateObj={},$("#widgetModal_template").modal("show")},e.prototype.openUploadTemplateModal=function(){$("#widgetModal_template_upload").modal("show")},e.prototype.openEditTemplateModal=function(e){this.modal={title:"Edit Template",button:"Update Template",action:"readonly",disabled:!1},this.templateObj=e,$("#widgetModal_template").modal("show")},e.prototype.openDeleteTemplateModal=function(e){this.templateObj=e,$("#widgetModal_template_delete").modal("show")},e}();se=oe([Object(a.Component)({selector:"app-templates",template:n("Y8Qu"),styles:[n("GzmA")]}),ie("design:paramtypes",["function"==typeof(le=void 0!==l.c&&l.c)&&le||Object,"function"==typeof(re=void 0!==r.CookieService&&r.CookieService)&&re||Object,"function"==typeof(de=void 0!==O&&O)&&de||Object,"function"==typeof(ce=void 0!==B&&B)&&ce||Object,"function"==typeof(pe=void 0!==D&&D)&&pe||Object,"function"==typeof(ue=void 0!==k&&k)&&ue||Object,"function"==typeof(fe=void 0!==b&&b)&&fe||Object,"function"==typeof(me=void 0!==Z&&Z)&&me||Object,"function"==typeof(he=void 0!==L&&L)&&he||Object])],se);var le,re,de,ce,pe,ue,fe,me,he,be=[{path:"templates",component:se}],ve=n("VNca");n.d(t,"TemplatesModule",function(){return ye});var ge=this&&this.__decorate||function(e,t,n,a){var o,i=arguments.length,s=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},ye=function(){function e(){}return e}();ye=ge([Object(a.NgModule)({imports:[o.CommonModule,s.c,i.a,l.d.forChild(be)],declarations:[se],providers:[O,k,Z,ve.a,L,D,B,b]})],ye)}});